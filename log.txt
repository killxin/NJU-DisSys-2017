rhjiang@rhjiang-ubuntu:~/go/src/github.com/killxin/NJU-DisSys-2017/src/raft$ go test -run Election
disconnect(0)
disconnect(1)
disconnect(2)
connect(0)
connect(1)
connect(2)
Test: initial election ...
0 becomes candidate
0 start election term 1
0 get vote reply &{1 true}
0 get vote reply &{1 true}
0 becomes leader
  ... Passed
disconnect(0)
disconnect(1)
disconnect(2)
connect(0)
connect(1)
connect(2)
Test: election after network failure ...
1 becomes candidate
1 start election term 1
1 get vote reply &{1 true}
1 get vote reply &{1 true}
1 becomes leader
disconnect(1)
2 becomes candidate
2 start election term 2
2 get vote reply &{2 true}
2 get vote reply <nil>
2 becomes leader
connect(1)
1 get appent {2 2 0 0 [] 0}
1 becomes follower
disconnect(2)
disconnect(0)
0 becomes candidate
0 start election term 3
0 get vote reply <nil>
0 get vote reply <nil>
1 becomes candidate
1 start election term 3
1 get vote reply <nil>
1 get vote reply <nil>
0 start election term 4
0 get vote reply <nil>
0 get vote reply <nil>
1 start election term 4
1 get vote reply <nil>
1 get vote reply <nil>
connect(0)
0 start election term 5
1 get reqvot {5 0 0 0}
1 becomes follower
0 get vote reply &{5 true}
0 get vote reply <nil>
0 becomes leader
connect(2)
2 get appent {5 0 0 0 [] 0}
2 becomes follower
  ... Passed
disconnect(0)
disconnect(1)
disconnect(2)
connect(0)
connect(1)
connect(2)
Test: reconnect server starts election ...
0 becomes candidate
0 start election term 1
0 get vote reply &{1 true}
0 get vote reply &{1 true}
0 becomes leader
disconnect(1)
1 becomes candidate
1 start election term 2
1 get vote reply <nil>
1 get vote reply <nil>
1 start election term 3
1 get vote reply <nil>
1 get vote reply <nil>
connect(1)
0 becomes follower
1 start election term 4
1 get vote reply &{4 true}
1 get vote reply &{4 true}
1 becomes leader
  ... Passed
PASS
ok      raft    15.007s

